<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>جدول العيادات الخارجية - مستشفى المقطم التخصصي</title>
<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
    :root {
        --dark-green: #2a6465;
        --light-green: #d0ffc2;
        --gold: #fcd88f;
        --white: #ffffff;
        --text-dark: #212529;
        --text-muted: #6c757d;
        --whatsapp-green: #25D366;
    }
    html {
        scroll-behavior: smooth;
    }
    body {
        font-family: 'Cairo', sans-serif;
        background-color: #f0f2f5;
        margin: 0;
        padding: 20px 15px;
        display: flex;
        justify-content: center;
        color: var(--text-dark);
    }
    .page {
        background: var(--white);
        width: 100%;
        max-width: 900px;
        padding: 25px;
        box-shadow: 0 5px 30px rgba(0,0,0,0.1);
        border-radius: 15px;
        box-sizing: border-box;
        overflow: hidden;
    }
    .logo-container { 
        text-align: center; 
        margin: -25px -25px 25px -25px;
    }
    .logo-image { 
        width: 100%;
        height: auto;
    }
    .info-text {
        text-align: center;
        line-height: 2;
        font-size: 16px;
        margin-bottom: 20px;
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 10px;
    }
    .feature-box {
        text-align: center;
        margin-bottom: 25px;
        padding: 20px;
        background-color: #e6f3f3;
        border: 1px solid var(--dark-green);
        border-radius: 10px;
    }
    .feature-box h2 {
        font-size: 18px;
        color: var(--dark-green);
        margin-top: 0;
    }
    .feature-box p {
        font-size: 14px;
        color: var(--text-muted);
    }
    .feature-box textarea, .feature-box input {
        width: 100%;
        padding: 12px 15px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-family: 'Cairo', sans-serif;
        font-size: 14px;
        margin-bottom: 15px;
        box-sizing: border-box;
    }
     .feature-box .input-wrapper {
        position: relative;
        display: flex;
        gap: 10px;
        align-items: center;
    }
     .feature-box input {
        flex-grow: 1;
        margin-bottom: 0;
    }
    .feature-box button {
        background-color: var(--dark-green);
        color: var(--white);
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        font-weight: 600;
        border-radius: 8px;
        cursor: pointer;
        transition: opacity 0.3s;
        margin: 5px 0;
        line-height: 1.5;
    }
     .feature-box button:disabled {
        background-color: #999;
        cursor: not-allowed;
    }
    .feature-box button.go-to-btn, #doctor-search-btn {
        background-color: var(--gold);
        color: var(--dark-green);
    }
    .feature-box button:hover:not(:disabled) {
        opacity: 0.9;
    }
    #recommendation-result, #search-results-container {
        margin-top: 15px;
        font-size: 16px;
        font-weight: 600;
        color: var(--text-dark);
        padding: 12px;
        background-color: var(--white);
        border-radius: 8px;
        min-height: 25px;
        margin-bottom: 15px;
        text-align: right;
    }
    #recommendation-buttons {
        display: flex;
        justify-content: center;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 10px;
    }
    #search-results-container .result-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        border-bottom: 1px solid #eee;
    }
     #search-results-container .result-item:last-child {
        border-bottom: none;
    }
    #search-results-container .result-info .clinic-name {
        font-size: 0.8em;
        color: var(--text-muted);
    }
    .loader {
        border: 4px solid #f3f3f3;
        border-top: 4px solid var(--dark-green);
        border-radius: 50%;
        width: 25px;
        height: 25px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
        display: none;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    .section-title {
        background-color: var(--dark-green);
        color: var(--white);
        padding: 12px 20px;
        border-radius: 10px;
        margin-top: 35px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
    }
    .section-title .icon { font-size: 24px; width: 35px; text-align: center; }
    .section-title .title-text h2 { font-size: 20px; font-weight: 700; margin:0; }
    .section-title .title-text h3 {
        font-family: 'Poppins', sans-serif;
        font-size: 14px;
        font-weight: 400;
        opacity: 0.9;
        color: var(--white);
        margin:0;
    }
    .doctor-card {
        display: block;
        margin-bottom: 15px;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border: 1px solid #eee;
        transition: box-shadow 0.3s, transform 0.3s;
    }
    .doctor-card.highlight {
        box-shadow: 0 0 15px 5px rgba(252, 216, 143, 0.7);
        transform: scale(1.02);
    }
    .doctor-card .doctor-name {
        background-color: #f8f9fa;
        text-align: center;
        padding: 12px;
        font-size: 16px;
        font-weight: 600;
    }
    .doctor-card .appointment {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 15px;
        font-size: 14px;
        border-bottom: 1px solid #eee;
    }
    .doctor-card .appointment:last-child { border-bottom: none; }
    .doctor-card .day { font-weight: bold; color: var(--dark-green); text-align: right; }
    .doctor-card .day .en { font-size: 0.8em; font-weight: 400; }
    .doctor-card .time {
        font-weight: 600;
        font-family: 'Poppins', sans-serif;
        font-size: 15px;
        background-color: var(--gold);
        color: var(--dark-green);
        padding: 3px 10px;
        border-radius: 5px;
    }
    .en { font-family: 'Poppins', sans-serif; font-size: 0.9em; font-weight: 400; margin-top: 2px; }
    .info-text .en { font-size: 0.9em; color: var(--text-muted); }
    .footer-image-container { margin: 40px -25px -25px -25px; }
    .footer-image { width: 100%; height: auto; display: block; }
    .whatsapp-section { text-align: center; padding: 20px; margin-top: 30px; }
    .whatsapp-section p { font-size: 16px; margin-bottom: 15px; }
    .whatsapp-btn {
        display: inline-block;
        background-color: var(--whatsapp-green);
        color: white;
        padding: 10px 25px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: 600;
        font-size: 16px;
        transition: transform 0.2s;
    }
    .whatsapp-btn:hover { transform: scale(1.05); }
    .whatsapp-btn i { margin-left: 10px; }
</style>
</head>
<body>

<div class="page">
    <div class="logo-container"><img src="https://i.ibb.co/jv4t9yMt/LOGO-1.png" alt="Mokattam Specialized Hospital Logo" class="logo-image"></div>
    <div class="info-text">
        نتشرف باستقبال حضراتكم بالعيادات الخارجية لمستشفى المقطم التخصصي
        <div class="en">We are honored to welcome you at the Outpatient Clinics of Mokattam Specialized Hospital</div>
        للحجز والاستفسار: <strong>16897</strong> | واتساب: <strong>01033366629</strong>
        <div class="en">For booking & inquiries: <strong>16897</strong> | WhatsApp: <strong>01033366629</strong></div>
        العنوان: شارع ٩ - المقطم | الرقم الضريبي: ٠٠٨-٤٨٩-٦٩٩
        <div class="en">Address: Street 9, Mokattam | Tax ID: 699-489-008</div>
    </div>

    <!-- Search by Doctor Name -->
    <div class="feature-box">
        <h2>البحث باسم الطبيب</h2>
        <div class="input-wrapper">
            <input type="text" id="doctor-search-input" placeholder="اكتب اسم الطبيب هنا...">
            <button id="doctor-search-btn">ابحث</button>
        </div>
        <div id="search-results-container" style="display: none;"></div>
    </div>

    <!-- Clinic Recommendation -->
    <div class="feature-box">
        <h2>لست متأكدًا أي عيادة تختار؟</h2>
        <p>صف لنا الأعراض التي تشعر بها، وسنساعدك في اختيار التخصص المناسب.</p>
        <textarea id="symptoms-input" placeholder="مثال: أشعر بجفاف في العين وضغطي مرتفع..."></textarea>
        <div id="recommendation-result">
            <div id="loader" class="loader"></div>
            <span id="recommendation-text"></span>
        </div>
        <button id="get-recommendation-btn">✨ ساعدني في اختيار العيادة</button>
        <div id="recommendation-buttons"></div>
    </div>

    <!-- Clinics Data Container -->
    <div id="clinics-container">
        <!-- العيادات ستظهر هنا -->
    </div>

    <!-- WhatsApp Section -->
    <div class="whatsapp-section">
        <p>للتحدث مع خدمة العملاء يمكنك التواصل عبر خدمة واتساب</p>
        <a href="https://api.whatsapp.com/send?phone=%2B201033366629" target="_blank" class="whatsapp-btn">
            تواصل معنا <i class="fab fa-whatsapp"></i>
        </a>
    </div>

    <div class="footer-image-container">
        <img src="https://i.ibb.co/Mx1BZJn3/C.png" alt="Hospital Contracts" class="footer-image">
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // بيانات العيادات والأطباء الكاملة
    const clinicsData = [
        { 
            id: "الباطنة-العامة", name: "الباطنة العامة", en_name: "General Medicine", icon: "fa-stethoscope",
            doctors: [
                { name: "د. ممدوح القاسم (استشاري)", en_name: "Dr. Mamdouh Elkassem (Consultant)", schedule: { "السبت": "04:30 PM", "الأحد": "02:00 PM", "الإثنين": "07:00 PM", "الثلاثاء": "12:00 PM", "الأربعاء": "07:00 PM", "الخميس": "12:00 PM" } },
                { name: "د. نيفين الفولي (استشاري)", en_name: "Dr. Nevine Elfouly (Consultant)", schedule: { "الأحد": "08:00 PM", "الأربعاء": "02:00 PM" } },
                { name: "د. سمير كامل (استشاري)", en_name: "Dr. Samir Kamel (Consultant)", schedule: { "السبت": "03:30 PM", "الإثنين": "03:30 PM", "الأربعاء": "03:30 PM" } },
                { name: "د. مجدي لبيب (استشاري)", en_name: "Dr. Magdy Labib (Consultant)", schedule: { "السبت": "12:00 PM", "الأحد": "12:00 PM", "الإثنين": "12:00 PM", "الثلاثاء": "05:00 PM", "الخميس": "05:00 PM" } },
                { name: "د. ولاء الباز (استشاري)", en_name: "Dr. Walaa Elbaz (Consultant)", schedule: { "السبت": "08:00 PM", "الثلاثاء": "08:00 PM", "الخميس": "02:00 PM" } },
                { name: "د. عمرو صدقي (استشاري)", en_name: "Dr. Amr Sedky (Consultant)", schedule: { "الإثنين": "02:00 PM", "الخميس": "04:00 PM" } },
                { name: "د. مروه محمد (استشاري)", en_name: "Dr. Marwa Mohamed (Consultant)", schedule: { "الخميس": "08:00 PM" } },
                { name: "د. سالي سالم (اخصائي)", en_name: "Dr. Sally Salem (Specialist)", schedule: { "الأحد": "08:00 PM", "الإثنين": "05:00 PM" } },
                { name: "د. يوسف نصار (استشاري)", en_name: "Dr. Youssef Nassar (Consultant)", schedule: { "الإثنين": "01:00 PM" } },
                { name: "د. حاتم عبد العزيز (استشاري)", en_name: "Dr. Hatem Abdelaziz (Consultant)", schedule: { "الأحد": "03:00 PM", "الإثنين": "04:30 PM", "الأربعاء": "05:00 PM", "الخميس": "07:30 PM", "الجمعة": "03:00 PM" } }
            ]
        },
        {
            id: "غدد-صماء-وسكر", name: "غدد صماء وسكر", en_name: "Endocrinology & Diabetes", icon: "fa-droplet",
            doctors: [
                { name: "د. يوسف نصار (استشاري)", en_name: "Dr. Youssef Nassar (Consultant)", schedule: { "الإثنين": "01:00 PM" } },
                { name: "د. سالي سالم (اخصائي)", en_name: "Dr. Sally Salem (Specialist)", schedule: { "السبت": "08:00 PM", "الإثنين": "05:00 PM" } },
                { name: "د. احمد فياض (استشاري)", en_name: "Dr. Ahmed Fayad (Consultant)", schedule: { "الأحد": "06:00 PM", "الأربعاء": "06:00 PM" } }
            ]
        },
        {
            id: "جهاز-هضمي-ومناظير", name: "جهاز هضمي ومناظير", en_name: "Gastroenterology & Endoscopy", icon: "fa-dot-circle",
            doctors: [
                 { name: "د. الشيماء مسعد (استشاري)", en_name: "Dr. Alshaymaa Mosaad (Consultant)", schedule: { "الخميس": "01:00 PM" } },
                 { name: "د. مريم مسعد (استشاري)", en_name: "Dr. Mariam Mosaad (Consultant)", schedule: { "الإثنين": "08:00 PM" } },
                 { name: "د. مروه محمد (استشاري)", en_name: "Dr. Marwa Mohamed (Consultant)", schedule: { "الخميس": "08:00 PM" } },
                 { name: "د. يوسف نصار (استشاري)", en_name: "Dr. Youssef Nassar (Consultant)", schedule: { "الإثنين": "01:00 PM" } },
                 { name: "د. عماد عبد الستار (استشاري)", en_name: "Dr. Emad Abdelsattar (Consultant)", schedule: { "الأحد": "06:00 PM" } }
            ]
        },
        {
            id: "الجراحة-العامة", name: "الجراحة العامة", en_name: "General Surgery", icon: "fa-person-dots-from-line",
            doctors: [
                { name: "د. احمد شبل (استشاري)", en_name: "Dr. Ahmed Shebl (Consultant)", schedule: { "السبت": "08:00 PM", "الأربعاء": "02:00 PM" } },
                { name: "د. نهى عبد الباقي (استشاري)", en_name: "Dr. Noha Abdelbaky (Consultant)", schedule: { "الإثنين": "06:00 PM", "الثلاثاء": "06:00 PM" } }
            ]
        },
        {
            id: "نساء-وتوليد", name: "نساء وتوليد", en_name: "Obstetrics & Gynecology", icon: "fa-person-pregnant",
            doctors: [
                { name: "د. كوثر علي (اخصائي)", en_name: "Dr. Kawthar Ali (Specialist)", schedule: { "السبت": "04:00 PM", "الإثنين": "05:00 PM" } },
                { name: "د. احمد طايع (استشاري)", en_name: "Dr. Ahmed Tayea (Consultant)", schedule: { "الثلاثاء": "05:30 PM", "الأربعاء": "06:30 PM" } }
            ]
        },
        {
            id: "أنف-وأذن-وحنجرة", name: "أنف وأذن وحنجرة", en_name: "ENT", icon: "fa-ear-listen",
            doctors: [
                { name: "د. محمد هلالي (استشاري)", en_name: "Dr. Mohamed Helaly (Consultant)", schedule: { "الإثنين": "08:00 PM", "الأربعاء": "04:00 PM" } },
                { name: "د. سامح نظمي (استشاري)", en_name: "Dr. Sameh Nazmy (Consultant)", schedule: { "الأحد": "08:30 PM", "الثلاثاء": "08:30 PM", "الأربعاء": "08:30 PM" } }
            ]
        },
        {
            id: "الصدر", name: "الصدر", en_name: "Pulmonology", icon: "fa-lungs",
            doctors: [
                { name: "د. مني الهادي (استشاري)", en_name: "Dr. Mona Elhady (Consultant)", schedule: { "الأحد": "05:00 PM", "الإثنين": "02:00 PM", "الأربعاء": "02:00 PM" } }
            ]
        },
        {
            id: "الجلدية", name: "الجلدية", en_name: "Dermatology", icon: "fa-spa",
            doctors: [
                { name: "د. محمد هاشم البطريق (استشاري)", en_name: "Dr. Mohamed Hashem (Consultant)", schedule: { "السبت": "12:00 PM" } }
            ]
        },
        {
            id: "العظام", name: "العظام", en_name: "Orthopedics", icon: "fa-bone",
            doctors: [
                { name: "د. محمد الديب (استشاري)", en_name: "Dr. Mohamed Eldeeb (Consultant)", schedule: { "الإثنين": "12:30 PM", "الثلاثاء": "02:30 PM", "الخميس": "08:00 PM" } }
            ]
        },
        {
            id: "المخ-والأعصاب-باطنة", name: "المخ والأعصاب (باطنة)", en_name: "Neurology", icon: "fa-brain",
            doctors: [
                { name: "د. احمد سرحان (استشاري)", en_name: "Dr. Ahmed Sarhan (Consultant)", schedule: { "السبت": "08:00 PM", "الإثنين": "08:00 PM" } }
            ]
        },
        {
            id: "جراحة-المخ-والأعصاب", name: "جراحة المخ والأعصاب", en_name: "Neurosurgery", icon: "fa-user-md",
            doctors: [
                { name: "د. احمد يسري (استشاري)", en_name: "Dr. Ahmed Yousry (Consultant)", schedule: { "السبت": "07:00 PM" } }
            ]
        },
        {
            id: "المسالك-البولية", name: "المسالك البولية", en_name: "Urology", icon: "fa-flask-vial",
            doctors: [
                { name: "د. محمد طلعت (استشاري)", en_name: "Dr. Mohamed Talaat (Consultant)", schedule: { "الأحد": "07:00 PM", "الأربعاء": "07:00 PM" } }
            ]
        },
        {
            id: "الأوعية-الدموية", name: "الأوعية الدموية", en_name: "Vascular", icon: "fa-network-wired",
            doctors: [
                { name: "د. محمد حاتم (استشاري)", en_name: "Dr. Mohamed Hatem (Consultant)", schedule: { "السبت": "12:00 PM", "الثلاثاء": "12:00 PM" } }
            ]
        },
        {
            id: "الأطفال", name: "الأطفال", en_name: "Pediatrics", icon: "fa-child-reaching",
            doctors: [
                { name: "د. نسرين عبدالرحمن (استشاري)", en_name: "Dr. Nesrin Abdelrahman (Consultant)", schedule: { "السبت": "01:00 PM", "الإثنين": "01:00 PM", "الثلاثاء": "02:00 PM", "الخميس": "06:30 PM" } }
            ]
        },
        {
            id: "الرمد", name: "الرمد", en_name: "Ophthalmology", icon: "fa-eye",
            doctors: [
                { name: "د. محمد صلاح (استشاري)", en_name: "Dr. Mohamed Salah (Consultant)", schedule: { "الإثنين": "07:30 PM", "الثلاثاء": "07:30 PM", "الخميس": "07:30 PM" } }
            ]
        },
        {
            id: "القلب", name: "القلب", en_name: "Cardiology", icon: "fa-heart-circle-check",
            doctors: [
                { name: "د. اشرف الأمير (استشاري)", en_name: "Dr. Ashraf Elamir (Consultant)", schedule: { "السبت": "06:00 PM", "الخميس": "08:00 PM" } }
            ]
        },
        {
            id: "الأسنان", name: "الأسنان", en_name: "Dentistry", icon: "fa-tooth",
            doctors: [
                { name: "د. محمود اهاب (اخصائي)", en_name: "Dr. Mahmoud Ehab (Specialist)", schedule: { "السبت": "04:00 PM", "الثلاثاء": "06:00 PM", "الأربعاء": "07:00 PM" } }
            ]
        },
        {
            id: "أمراض-الدم", name: "أمراض الدم", en_name: "Hematology", icon: "fa-vial-virus",
            doctors: [
                { name: "د. عمرو صدقي (استشاري)", en_name: "Dr. Amr Sedky (Consultant)", schedule: { "الإثنين": "02:00 PM", "الخميس": "04:00 PM" } }
            ]
        }
    ];

    const clinicsContainer = document.getElementById('clinics-container');
    const daysMap = { 
        "السبت": "Saturday", "الأحد": "Sunday", "الإثنين": "Monday", 
        "الثلاثاء": "Tuesday", "الأربعاء": "Wednesday", "الخميس": "Thursday", "الجمعة": "Friday"
    };

    function renderClinics(data) {
        clinicsContainer.innerHTML = '';
        data.forEach(clinic => {
            const section = document.createElement('div');
            section.className = 'clinic-section';
            section.id = `clinic-${clinic.id.replace(/[()\s]/g, '-')}`;
            const title = document.createElement('div');
            title.className = 'section-title';
            title.innerHTML = `
                <div class="icon"><i class="fa-solid ${clinic.icon}"></i></div>
                <div class="title-text">
                    <h2>${clinic.name}</h2>
                    <h3 class="en">${clinic.en_name}</h3>
                </div>`;
            section.appendChild(title);
            clinic.doctors.forEach((doctor, index) => {
                const card = document.createElement('div');
                card.className = 'doctor-card';
                card.id = `doc-${clinic.id.replace(/[()\s]/g, '-')}-${index}`;
                const nameDiv = document.createElement('div');
                nameDiv.className = 'doctor-name';
                nameDiv.innerHTML = `<div>${doctor.name}</div><div class="en">${doctor.en_name}</div>`;
                card.appendChild(nameDiv);
                Object.keys(doctor.schedule).forEach(day => {
                    const appointmentDiv = document.createElement('div');
                    appointmentDiv.className = 'appointment';
                    appointmentDiv.innerHTML = `
                        <span class="day">${day}<br><span class="en">${daysMap[day]}</span></span>
                        <span class="time">${doctor.schedule[day]}</span>`;
                    card.appendChild(appointmentDiv);
                });
                section.appendChild(card);
            });
            clinicsContainer.appendChild(section);
        });
    }

    renderClinics(clinicsData);

    const searchInput = document.getElementById('doctor-search-input');
    const searchBtn = document.getElementById('doctor-search-btn');
    const searchResultsContainer = document.getElementById('search-results-container');
    
    function performSearch() {
        const searchTerm = searchInput.value.toLowerCase().trim();
        searchResultsContainer.innerHTML = '';
        if (!searchTerm) {
            searchResultsContainer.style.display = 'none';
            return;
        }
        const foundDoctors = [];
        clinicsData.forEach(clinic => {
            clinic.doctors.forEach((doctor, index) => {
                if (doctor.name.toLowerCase().includes(searchTerm) || doctor.en_name.toLowerCase().includes(searchTerm)) {
                    foundDoctors.push({
                        ...doctor,
                        clinicName: clinic.name,
                        cardId: `doc-${clinic.id.replace(/[()\s]/g, '-')}-${index}`
                    });
                }
            });
        });
        if (foundDoctors.length > 0) {
            foundDoctors.forEach(doctor => {
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                resultItem.innerHTML = `
                    <div class="result-info">
                        <strong>${doctor.name}</strong>
                        <div class="clinic-name">${doctor.clinicName}</div>
                    </div>
                    <button class="go-to-btn">اذهب إلى الطبيب</button>`;
                resultItem.querySelector('button').addEventListener('click', () => {
                    scrollToAndHighlight(doctor.cardId);
                });
                searchResultsContainer.appendChild(resultItem);
            });
            searchResultsContainer.style.display = 'block';
        } else {
            searchResultsContainer.style.display = 'block';
            searchResultsContainer.innerHTML = `<p>لا توجد نتائج مطابقة لبحثك.</p>`;
        }
    }
    
    searchBtn.addEventListener('click', performSearch);
    searchInput.addEventListener('keyup', (event) => {
        if (event.key === 'Enter') performSearch();
    });

    function scrollToAndHighlight(cardId) {
        const card = document.getElementById(cardId);
        if (card) {
            document.querySelectorAll('.doctor-card.highlight').forEach(c => c.classList.remove('highlight'));
            card.scrollIntoView({ behavior: 'smooth', block: 'center' });
            card.classList.add('highlight');
            setTimeout(() => card.classList.remove('highlight'), 2500);
        }
    }

    // ===================================================================================
    // START: الكود الجديد الذي يتحدث مع الذكاء الاصطناعي
    // ===================================================================================

    const getRecommendationBtn = document.getElementById('get-recommendation-btn');
    const symptomsInput = document.getElementById('symptoms-input');
    const recommendationText = document.getElementById('recommendation-text');
    const recommendationButtons = document.getElementById('recommendation-buttons');
    const loader = document.getElementById('loader');

    // هذا هو الرابط الذي يربط الواجهة الأمامية بالخادم الذكي على Vercel
    const AI_FUNCTION_URL = "/api/recommend"; 

    getRecommendationBtn.addEventListener('click', async () => {
        const symptomsText = symptomsInput.value.trim();
        if (!symptomsText) {
            recommendationText.textContent = 'من فضلك، قم بوصف الأعراض التي تشعر بها.';
            recommendationButtons.innerHTML = '';
            return;
        }

        loader.style.display = 'block';
        recommendationText.textContent = 'لحظات، يقوم المساعد الذكي بتحليل الشكوى...';
        recommendationButtons.innerHTML = '';
        getRecommendationBtn.disabled = true;

        try {
            const response = await fetch(AI_FUNCTION_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ symptoms: symptomsText })
            });

            if (!response.ok) {
                throw new Error('حدث خطأ أثناء التواصل مع المساعد الذكي.');
            }

            const data = await response.json();
            
            if (data.recommendations && data.recommendations.length > 0) {
                const clinicMap = new Map(clinicsData.map(c => [c.id, c.name]));
                let recommendations = [];
                let recommendationHTML = "التخصص المقترح لك هو: ";

                data.recommendations.forEach(recId => {
                    if (clinicMap.has(recId)) {
                        recommendations.push({ id: recId, name: clinicMap.get(recId) });
                    }
                });

                if (recommendations.length > 0) {
                    recommendations.forEach((rec, index) => {
                        recommendationHTML += `<strong>${rec.name}</strong>`;
                        if (index < recommendations.length - 1) {
                            recommendationHTML += " أو ";
                        }
                        createGoToButton(rec.name, rec.id);
                    });
                    recommendationText.innerHTML = recommendationHTML;
                } else {
                    throw new Error("AI returned a clinic ID that doesn't exist.");
                }

            } else {
                recommendationText.innerHTML = `لم نتمكن من تحديد تخصص دقيق. نقترح عليك التوجه لعيادة <strong>الباطنة العامة</strong> للتشخيص المبدئي.`;
                createGoToButton("الباطنة العامة", "الباطنة-العامة");
            }

        } catch (error) {
            console.error("Error:", error);
            recommendationText.textContent = 'عفواً، حدث خطأ تقني. يرجى المحاولة مرة أخرى.';
        } finally {
            loader.style.display = 'none';
            getRecommendationBtn.disabled = false;
        }
    });

    function createGoToButton(name, id) {
        const button = document.createElement('button');
        button.className = 'go-to-btn';
        button.innerHTML = `اذهب إلى عيادة ${name} <i class="fa-solid fa-arrow-down"></i>`;
        button.addEventListener('click', () => {
            const clinicSectionId = "clinic-" + id.replace(/[()\s]/g, '-');
            const clinicSection = document.getElementById(clinicSectionId);
            if (clinicSection) {
                clinicSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
        recommendationButtons.appendChild(button);
    }
});
</script>

</body>
</html>
